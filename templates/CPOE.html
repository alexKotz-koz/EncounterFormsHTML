{% extends "base.html" %}
{% block title %} CPOE A&P {% endblock %}


{% block content %}
{% for pt in patient %}
<div id="navBar1">
     <nav>
        <ul>
            <li> <a href="/home/{{ pt.id }}">Home</a></li>
            <li> <a href="/ChartSummary/{{ pt.id }}">Chart Summary</a></li>
            <li> <a href="/CarePlan/{{ pt.id}}">Care Plan</a> </li>
            <li> <a href="/AddPt">Add Patient</a></li>
            <!--<li> <a href="/CPOE">CPOE A&P</a> </li>-->
            <li> <a href="/HPI">HPI-ROS</a></li>
            <li> <a href="/PtInstructions">Patient Instructions</a></li>
            <li> <a href="/VS">Vital Signs</a></li>
            <li> <a href="/Immunizations">Immunizations</a></li>
            <li> <a href="/PMHPSH">PMH/PSH</a></li>
            <li> <a href="/findPatient">Find Patient</a></li>
        </ul>
    </nav>
</div>

{% endfor %}


<h2>{{ patient.First }} {{ patient.Last }}</h2>

<button id="viewAllProtocols"><div class="viewAllProtocols">View All Protocols</div></button>
<button id="assessmentsDue"><div class="assessmentsDue">Assessments Due</div></button>


<button id="addProblem"><a href="/AddProblem/{{ pid }}"><div class="addProblem">Add Problem</div></a></button>
<button id="problemList"><div class="problemList">Problem List</div></button>

<form name="a&P1" method="post" action="/CPOE/{{ pid }}">
    <h2><div class="assessment1Title">Assessment 1: </div></h2>
    <select name="problemDD1">
        {% for prob in patientProblems %}
            <option name="problem1" id="problem1">{{ prob.DxName }}</option>
        {% endfor %}
    </select>
    <textarea class="textarea" name="assessment1" id="assessment1"></textarea>
    <input type="submit" name="commitA&P1" value="Commit Assessment 1">
</form>

<form name="a&P2" method="post" action="/CPOE/{{ pid }}">
    <h2><div class="assessment2Title">Assessment 2: </div></h2>
    <select name="problemDD2">
        {% for prob in patientProblems %}
            <option id="problem2">{{ prob.DxName }}</option>
        {% endfor %}
    </select>
    <textarea class="textarea" name="assessment1" id="assessment2"></textarea>
    <input type="submit" name="commitA&P2" value="Commit Assessment">
</form>

<!-- For Expanded Text Areas -->
<script>
    let el = document.querySelector(".input-wrap .input");
    let widthMachine = document.querySelector(".input-wrap .width-machine");
    el.addEventListener("keyup", () => {
        widthMachine.innerHTML = el.value;
    });
    // Dealing with Textarea Height
    function calcHeight(value) {
        let numberOfLineBreaks = (value.match(/\n/g) || []).length;
        // min-height + lines x line-height + padding + border
        let newHeight = 20 + numberOfLineBreaks * 20 + 12 + 2;
        return newHeight;
    }
    let textarea = document.querySelector(".resize-ta");
    textarea.addEventListener("keyup", () => {
        textarea.style.height = calcHeight(textarea.value) + "px";// Dealing with Input width
    });
    </script>

{% endblock %}
